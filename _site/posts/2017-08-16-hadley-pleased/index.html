<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-0.9.333">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Davis Vaughan">
<meta name="dcterms.date" content="2017-08-16">
<title>Davis Vaughan - Which RStudio blog posts “pleased” Hadley? A tidytext + web scraping analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<script src="../../site_libs/quarto-nav/quarto-nav.js"></script><script src="../../site_libs/quarto-nav/headroom.min.js"></script><script src="../../site_libs/clipboard/clipboard.min.js"></script><meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script><script src="../../site_libs/quarto-search/fuse.min.js"></script><script src="../../site_libs/quarto-search/quarto-search.js"></script><script src="../../site_libs/quarto-html/quarto.js"></script><script src="../../site_libs/quarto-html/popper.min.js"></script><script src="../../site_libs/quarto-html/tippy.umd.min.js"></script><script src="../../site_libs/quarto-html/anchor.min.js"></script><link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link id="quarto-text-highlighting-styles" href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script><link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><link rel="stylesheet" href="../../styles.css">
</head>
<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Davis Vaughan</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link" href="../../index.html">Posts</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">About</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/DavisVaughan"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/dvaughan32"><i class="bi bi-twitter" role="img">
</i> 
 </a>
  </li>  
</ul>
<div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full"><div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Which RStudio blog posts “pleased” Hadley? A tidytext + web scraping analysis</h1>
                </div>
  </div>
    
  



  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Davis Vaughan </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">August 16, 2017</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto"><nav id="TOC" role="doc-toc"><h2 id="toc-title">Contents</h2>
   
  <ul>
<li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#required-packages" id="toc-required-packages" class="nav-link" data-scroll-target="#required-packages">Required packages</a></li>
  <li><a href="#extract-the-html-from-the-rstudio-blog-archive" id="toc-extract-the-html-from-the-rstudio-blog-archive" class="nav-link" data-scroll-target="#extract-the-html-from-the-rstudio-blog-archive">Extract the HTML from the RStudio blog archive</a></li>
  <li><a href="#html-from-each-blog-post" id="toc-html-from-each-blog-post" class="nav-link" data-scroll-target="#html-from-each-blog-post">HTML from each blog post</a></li>
  <li><a href="#meta-information" id="toc-meta-information" class="nav-link" data-scroll-target="#meta-information">Meta information</a></li>
  <li><a href="#categories-and-tags" id="toc-categories-and-tags" class="nav-link" data-scroll-target="#categories-and-tags">Categories and tags</a></li>
  <li><a href="#the-blog-post-itself" id="toc-the-blog-post-itself" class="nav-link" data-scroll-target="#the-blog-post-itself">The blog post itself</a></li>
  <li><a href="#who-writes-the-most-posts" id="toc-who-writes-the-most-posts" class="nav-link" data-scroll-target="#who-writes-the-most-posts">Who writes the most posts?</a></li>
  <li><a href="#tidytext" id="toc-tidytext" class="nav-link" data-scroll-target="#tidytext">Tidytext</a></li>
  <li><a href="#remove-stop-words" id="toc-remove-stop-words" class="nav-link" data-scroll-target="#remove-stop-words">Remove stop words</a></li>
  <li><a href="#top-15-words-overall" id="toc-top-15-words-overall" class="nav-link" data-scroll-target="#top-15-words-overall">Top 15 words overall</a></li>
  <li><a href="#is-hadley-more-pleased-than-everyone-else" id="toc-is-hadley-more-pleased-than-everyone-else" class="nav-link" data-scroll-target="#is-hadley-more-pleased-than-everyone-else">Is Hadley more “pleased” than everyone else?</a></li>
  <li><a href="#is-there-a-statistical-difference-here" id="toc-is-there-a-statistical-difference-here" class="nav-link" data-scroll-target="#is-there-a-statistical-difference-here">Is there a statistical difference here?</a></li>
  <li><a href="#test-conclusion" id="toc-test-conclusion" class="nav-link" data-scroll-target="#test-conclusion">Test conclusion</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul></nav>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content"><section id="introduction" class="level2"><h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Awhile back, I saw a conversation on twitter about how Hadley uses the word “pleased” very often when introducing a new blog post (I couldn’t seem to find this tweet anymore. Can anyone help?). Out of curiousity, and to flex my R web scraping muscles a bit, I’ve decided to analyze the 240+ blog posts that RStudio has put out since 2011. This post will do a few things:</p>
<ul>
<li>Scrape the RStudio blog archive page to construct URL links to each blog post</li>
<li>Scrape the blog post text and metadata from each post</li>
<li>Use a bit of <code>tidytext</code> for some exploratory analysis</li>
<li>Perform a statistical test to compare Hadley’s use of “pleased” to the other blog post authors</li>
</ul>
<p>Spoiler alert: Hadley uses “pleased” ALOT.</p>
</section><section id="required-packages" class="level2"><h2 class="anchored" data-anchor-id="required-packages">Required packages</h2>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/juliasilge/tidytext">tidytext</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rvest.tidyverse.org/">rvest</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://xml2.r-lib.org/">xml2</a></span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="extract-the-html-from-the-rstudio-blog-archive" class="level2"><h2 class="anchored" data-anchor-id="extract-the-html-from-the-rstudio-blog-archive">Extract the HTML from the RStudio blog archive</h2>
<p>To be able to extract the text from each blog post, we first need to have a link to that blog post. Luckily, RStudio keeps an up to date archive page that we can scrape. Using <code>xml2</code>, we can get the HTML off that page.</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">archive_page</span> <span class="op">&lt;-</span> <span class="st">"https://blog.rstudio.com/archives/"</span>

<span class="va">archive_html</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://xml2.r-lib.org/reference/read_xml.html">read_html</a></span><span class="op">(</span><span class="va">archive_page</span><span class="op">)</span>

<span class="co"># Doesn't seem very useful...yet</span>
<span class="va">archive_html</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<pre><code>#&gt; {xml_document}
#&gt; &lt;html lang="en-us"&gt;
#&gt; [1] &lt;head&gt;\n&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;\n&lt;meta charset="u ...
#&gt; [2] &lt;body&gt;\n    &lt;nav class="menu"&gt;&lt;svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xli ...</code></pre>
</div>
<p>Now we use a bit of <code>rvest</code> magic combined with the HTML inspector in Chrome to figure out which elements contain the info we need (I also highly recommend <a href="http://selectorgadget.com/">SelectorGadget</a> for this kind of work). Looking at the image below, you can see that all of the links are contained within the <code>main</code> tag as <code>a</code> tags (links).</p>
<p><img src="./img/html-inspector.png" class="img-fluid"></p>
<p>The code below extracts all of the links, and then adds the prefix containing the base URL of the site.</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">links</span> <span class="op">&lt;-</span> <span class="va">archive_html</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  
  <span class="co"># Only the "main" body of the archive</span>
  <span class="fu"><a href="https://rvest.tidyverse.org/reference/rename.html">html_nodes</a></span><span class="op">(</span><span class="st">"main"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  
  <span class="co"># Grab any node that is a link</span>
  <span class="fu"><a href="https://rvest.tidyverse.org/reference/rename.html">html_nodes</a></span><span class="op">(</span><span class="st">"a"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  
  <span class="co"># Extract the hyperlink reference from those link tags</span>
  <span class="co"># The hyperlink is an attribute as opposed to a node</span>
  <span class="fu"><a href="https://rvest.tidyverse.org/reference/html_attr.html">html_attr</a></span><span class="op">(</span><span class="st">"href"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  
  <span class="co"># Prefix them all with the base URL</span>
  <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"http://blog.rstudio.com"</span>, <span class="va">.</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">links</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<pre><code>#&gt; [1] "http://blog.rstudio.com/2017/08/25/rstudio-conf-2018-early-bird-pricing/"    
#&gt; [2] "http://blog.rstudio.com/2017/08/22/rstudio-v1-1-preview-object-explorer/"    
#&gt; [3] "http://blog.rstudio.com/2017/08/18/google-cloud-platform/"                   
#&gt; [4] "http://blog.rstudio.com/2017/08/16/rstudio-preview-connections/"             
#&gt; [5] "http://blog.rstudio.com/2017/08/15/contributed-talks-diversity-scholarships/"
#&gt; [6] "http://blog.rstudio.com/2017/08/15/shiny-1-0-4/"</code></pre>
</div>
</section><section id="html-from-each-blog-post" class="level2"><h2 class="anchored" data-anchor-id="html-from-each-blog-post">HTML from each blog post</h2>
<p>Now that we have every link, we’re ready to extract the HTML from each individual blog post. To make things more manageable, we start by creating a tibble, and then using the <code>mutate + map</code> combination to created a column of XML Nodesets (we will use this combination a lot). Each nodeset contains the HTML for that blog post (exactly like the HTML for the archive page).</p>
<div class="cell">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">blog_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span><span class="va">links</span><span class="op">)</span>

<span class="va">blog_data</span> <span class="op">&lt;-</span> <span class="va">blog_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>main <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span>
                    <span class="co"># Iterate through every link</span>
                    .x <span class="op">=</span> <span class="va">links</span>, 
                    
                    <span class="co"># For each link, read the HTML for that page, and return the main section </span>
                    .f <span class="op">=</span> <span class="op">~</span><span class="fu"><a href="http://xml2.r-lib.org/reference/read_xml.html">read_html</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
                            <span class="fu"><a href="https://rvest.tidyverse.org/reference/rename.html">html_nodes</a></span><span class="op">(</span><span class="st">"main"</span><span class="op">)</span>
                    <span class="op">)</span>
         <span class="op">)</span>

<span class="va">blog_data</span><span class="op">$</span><span class="va">main</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<pre><code>#&gt; [[1]]
#&gt; {xml_nodeset (1)}
#&gt; [1] &lt;main&gt;&lt;div class="article-meta"&gt;\n&lt;h1&gt;&lt;span class="title"&gt;Newer to R? rstudio::conf 2018 is fo ...</code></pre>
</div>
</section><section id="meta-information" class="level2"><h2 class="anchored" data-anchor-id="meta-information">Meta information</h2>
<p>Before extracting the blog post itself, lets grab the meta information about each post, specifically:</p>
<ul>
<li>Author</li>
<li>Title</li>
<li>Date</li>
<li>Category</li>
<li>Tags</li>
</ul>
<p>In the exploratory analysis, we will use author and title, but the other information might be useful for future analysis.</p>
<p>Looking at the first blog post, the Author, Date, and Title are all HTML class names that we can feed into <code>rvest</code> to extract that information.</p>
<p><img src="./img/date-author-title.png" class="img-fluid"></p>
<p>In the code below, an example of extracting the author information is shown. To select a HTML class (like “author”) as opposed to a tag (like “main”), we have to put a period in front of the class name. Once the html node we are interested in has been identified, we can extract the text for that node using <code><a href="https://rvest.tidyverse.org/reference/html_text.html">html_text()</a></code>.</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">blog_data</span><span class="op">$</span><span class="va">main</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rvest.tidyverse.org/reference/rename.html">html_nodes</a></span><span class="op">(</span><span class="st">".author"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rvest.tidyverse.org/reference/html_text.html">html_text</a></span><span class="op">(</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<pre><code>#&gt; [1] "Roger Oberg"</code></pre>
</div>
<p>To scale up to grab the author for all posts, we use <code><a href="https://purrr.tidyverse.org/reference/map.html">map_chr()</a></code> since we want a character of the author’s name returned.</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map_chr</a></span><span class="op">(</span>.x <span class="op">=</span> <span class="va">blog_data</span><span class="op">$</span><span class="va">main</span>,
        .f <span class="op">=</span> <span class="op">~</span><span class="fu"><a href="https://rvest.tidyverse.org/reference/rename.html">html_nodes</a></span><span class="op">(</span><span class="va">.x</span>, <span class="st">".author"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
                <span class="fu"><a href="https://rvest.tidyverse.org/reference/html_text.html">html_text</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<pre><code>#&gt;  [1] "Roger Oberg"        "Kevin Ushey"        "Roger Oberg"       
#&gt;  [4] "Jonathan McPherson" "Hadley Wickham"     "Winston Chang"     
#&gt;  [7] "Gary Ritchie"       "Roger Oberg"        "Jeff Allen"        
#&gt; [10] "Javier Luraschi"</code></pre>
</div>
<p>Finally, notice that if we switch <code>".author"</code> with <code>".title"</code> or <code>".date"</code> then we can grab that information as well. This kind of thinking means that we should create a function for extracting these pieces of information!</p>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">extract_info</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">html</span>, <span class="va">class_name</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map_chr</a></span><span class="op">(</span>
          <span class="co"># Given the list of main HTMLs</span>
          .x <span class="op">=</span> <span class="va">html</span>,
          
          <span class="co"># Extract the text we are interested in for each one </span>
          .f <span class="op">=</span> <span class="op">~</span><span class="fu"><a href="https://rvest.tidyverse.org/reference/rename.html">html_nodes</a></span><span class="op">(</span><span class="va">.x</span>, <span class="va">class_name</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
                  <span class="fu"><a href="https://rvest.tidyverse.org/reference/html_text.html">html_text</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>

<span class="co"># Extract the data</span>
<span class="va">blog_data</span> <span class="op">&lt;-</span> <span class="va">blog_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
     author <span class="op">=</span> <span class="fu">extract_info</span><span class="op">(</span><span class="va">main</span>, <span class="st">".author"</span><span class="op">)</span>,
     title  <span class="op">=</span> <span class="fu">extract_info</span><span class="op">(</span><span class="va">main</span>, <span class="st">".title"</span><span class="op">)</span>,
     date   <span class="op">=</span> <span class="fu">extract_info</span><span class="op">(</span><span class="va">main</span>, <span class="st">".date"</span><span class="op">)</span>
    <span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">blog_data</span>, <span class="va">author</span>, <span class="va">date</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<pre><code>#&gt; # A tibble: 253 × 2
#&gt;    author             date      
#&gt;    &lt;chr&gt;              &lt;chr&gt;     
#&gt;  1 Roger Oberg        2017-08-25
#&gt;  2 Kevin Ushey        2017-08-22
#&gt;  3 Roger Oberg        2017-08-18
#&gt;  4 Jonathan McPherson 2017-08-16
#&gt;  5 Hadley Wickham     2017-08-15
#&gt;  6 Winston Chang      2017-08-15
#&gt;  7 Gary Ritchie       2017-08-11
#&gt;  8 Roger Oberg        2017-08-10
#&gt;  9 Jeff Allen         2017-08-03
#&gt; 10 Javier Luraschi    2017-07-31
#&gt; # … with 243 more rows</code></pre>
</div>
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">blog_data</span>, <span class="va">title</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<pre><code>#&gt; # A tibble: 253 × 1
#&gt;    title                                                                        
#&gt;    &lt;chr&gt;                                                                        
#&gt;  1 Newer to R? rstudio::conf 2018 is for you! Early bird pricing ends August 31.
#&gt;  2 RStudio v1.1 Preview - Object Explorer                                       
#&gt;  3 RStudio Server Pro is ready for BigQuery on the Google Cloud Platform        
#&gt;  4 RStudio 1.1 Preview - Data Connections                                       
#&gt;  5 rstudio::conf(2018): Contributed talks, e-posters, and diversity scholarships
#&gt;  6 Shiny 1.0.4                                                                  
#&gt;  7 RStudio v1.1 Preview: Terminal                                               
#&gt;  8 Building tidy tools workshop                                                 
#&gt;  9 RStudio Connect v1.5.4 - Now Supporting Plumber!                             
#&gt; 10 sparklyr 0.6                                                                 
#&gt; # … with 243 more rows</code></pre>
</div>
</section><section id="categories-and-tags" class="level2"><h2 class="anchored" data-anchor-id="categories-and-tags">Categories and tags</h2>
<p>The other bits of meta data that might be interesting are the categories and tags that the post falls under. This is a little bit more involved, because both the categories and tags fall under the same class, <code>".terms"</code>. To separate them, we need to look into the href to see if the information is either a tag or a category (href = “/categories/” VS href = “/tags/”).</p>
<p><img src="./img/cat-tag.png" class="img-fluid"></p>
<p>The function below extracts either the categories or the tags, depending on the argument, by:</p>
<ul>
<li>Extracting the <code>".terms"</code> class, and then all of the links inside of it (<code>a</code> tags).</li>
<li>Checking each link to see if the hyperlink reference contains “categories” or “tags” depending on the one that we are interested in. If it does, it returns the text corresponding to that link, otherwise it returns NAs which are then removed.</li>
</ul>
<p>The final step results in two list columns containing character vectors of varying lengths corresponding to the categories and tags of each post.</p>
<div class="cell">
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">extract_tag_or_cat</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">html</span>, <span class="va">info_name</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="co"># Extract the links under the terms class</span>
  <span class="va">cats_and_tags</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span>.x <span class="op">=</span> <span class="va">html</span>, 
                       .f <span class="op">=</span> <span class="op">~</span><span class="fu"><a href="https://rvest.tidyverse.org/reference/rename.html">html_nodes</a></span><span class="op">(</span><span class="va">.x</span>, <span class="st">".terms"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
                              <span class="fu"><a href="https://rvest.tidyverse.org/reference/rename.html">html_nodes</a></span><span class="op">(</span><span class="st">"a"</span><span class="op">)</span><span class="op">)</span>
  
  <span class="co"># For each link, if the href contains the word categories/tags </span>
  <span class="co"># return the text corresponding to that link</span>
  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">cats_and_tags</span>, 
    <span class="op">~</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span>condition <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="va">info_name</span>, <span class="fu"><a href="https://rvest.tidyverse.org/reference/html_attr.html">html_attr</a></span><span class="op">(</span><span class="va">.x</span>, <span class="st">"href"</span><span class="op">)</span><span class="op">)</span>, 
             true      <span class="op">=</span> <span class="fu"><a href="https://rvest.tidyverse.org/reference/html_text.html">html_text</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span>, 
             false     <span class="op">=</span> <span class="cn">NA_character_</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
      <span class="va">.</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>
<span class="op">}</span>

<span class="co"># Apply our new extraction function</span>
<span class="va">blog_data</span> <span class="op">&lt;-</span> <span class="va">blog_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
    categories <span class="op">=</span> <span class="fu">extract_tag_or_cat</span><span class="op">(</span><span class="va">main</span>, <span class="st">"categories"</span><span class="op">)</span>,
    tags       <span class="op">=</span> <span class="fu">extract_tag_or_cat</span><span class="op">(</span><span class="va">main</span>, <span class="st">"tags"</span><span class="op">)</span>
  <span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">blog_data</span>, <span class="va">categories</span>, <span class="va">tags</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<pre><code>#&gt; # A tibble: 253 × 2
#&gt;    categories tags     
#&gt;    &lt;list&gt;     &lt;list&gt;   
#&gt;  1 &lt;chr [3]&gt;  &lt;chr [1]&gt;
#&gt;  2 &lt;chr [1]&gt;  &lt;chr [0]&gt;
#&gt;  3 &lt;chr [2]&gt;  &lt;chr [4]&gt;
#&gt;  4 &lt;chr [1]&gt;  &lt;chr [0]&gt;
#&gt;  5 &lt;chr [1]&gt;  &lt;chr [0]&gt;
#&gt;  6 &lt;chr [2]&gt;  &lt;chr [0]&gt;
#&gt;  7 &lt;chr [1]&gt;  &lt;chr [3]&gt;
#&gt;  8 &lt;chr [3]&gt;  &lt;chr [8]&gt;
#&gt;  9 &lt;chr [3]&gt;  &lt;chr [2]&gt;
#&gt; 10 &lt;chr [1]&gt;  &lt;chr [3]&gt;
#&gt; # … with 243 more rows</code></pre>
</div>
<div class="cell">
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">blog_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">title</span> <span class="op">==</span> <span class="st">"Building tidy tools workshop"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">categories</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<pre><code>#&gt; [[1]]
#&gt; [1] "Packages"  "tidyverse" "Training"</code></pre>
</div>
<div class="cell">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">blog_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">title</span> <span class="op">==</span> <span class="st">"Building tidy tools workshop"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">tags</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<pre><code>#&gt; [[1]]
#&gt; [1] "Advanced R"       "data science"     "ggplot2"          "Hadley Wickham"  
#&gt; [5] "R"                "RStudio Workshop" "r training"       "tutorial"</code></pre>
</div>
</section><section id="the-blog-post-itself" class="level2"><h2 class="anchored" data-anchor-id="the-blog-post-itself">The blog post itself</h2>
<p>Finally, to extract the blog post itself, we can notice that each piece of text in the post is inside of a paragraph tag (<code>p</code>). Being careful to avoid the <code>".terms"</code> class that contained the categories and tags, which also happens to be in a paragraph tag, we can extract the full blog posts. To ignore the <code>".terms"</code> class, use the <code>:not()</code> selector.</p>
<div class="cell">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">blog_data</span> <span class="op">&lt;-</span> <span class="va">blog_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
    text <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map_chr</a></span><span class="op">(</span><span class="va">main</span>, <span class="op">~</span><span class="fu"><a href="https://rvest.tidyverse.org/reference/rename.html">html_nodes</a></span><span class="op">(</span><span class="va">.x</span>, <span class="st">"p:not(.terms)"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
                 <span class="fu"><a href="https://rvest.tidyverse.org/reference/html_text.html">html_text</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
                 <span class="co"># The text is returned as a character vector. </span>
                 <span class="co"># Collapse them all into 1 string.</span>
                 <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span>collapse <span class="op">=</span> <span class="st">" "</span><span class="op">)</span><span class="op">)</span>
  <span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">blog_data</span>, <span class="va">text</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 253 × 1</span>
<span class="co">#&gt;    text                                                                         </span>
<span class="co">#&gt;    &lt;chr&gt;                                                                        </span>
<span class="co">#&gt;  1 "Immersion is among the most effective ways to learn any language. Immersing…</span>
<span class="co">#&gt;  2 "Today, we’re continuing our blog series on new features in RStudio 1.1. If …</span>
<span class="co">#&gt;  3 "RStudio is excited to announce the availability of RStudio Server Pro on th…</span>
<span class="co">#&gt;  4 "Today, we’re continuing our blog series on new features in RStudio 1.1. If …</span>
<span class="co">#&gt;  5 "rstudio::conf, the conference on all things R and RStudio, will take place …</span>
<span class="co">#&gt;  6 "Shiny 1.0.4 is now available on CRAN. To install it, run: For most Shiny us…</span>
<span class="co">#&gt;  7 "Today we’re excited to announce availability of our first Preview Release f…</span>
<span class="co">#&gt;  8 "Have you embraced the tidyverse? Do you now want to expand it to meet your …</span>
<span class="co">#&gt;  9 "We’re thrilled to announce support for hosting Plumber APIs in RStudio Conn…</span>
<span class="co">#&gt; 10 "We’re excited to announce a new release of the sparklyr package, available …</span>
<span class="co">#&gt; # … with 243 more rows</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="who-writes-the-most-posts" class="level2"><h2 class="anchored" data-anchor-id="who-writes-the-most-posts">Who writes the most posts?</h2>
<p>Now that we have all of this data, what can we do with it? To start with, who writes the most posts?</p>
<div class="cell">
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">blog_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">author</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>author <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span><span class="op">(</span><span class="va">author</span>, <span class="va">count</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  
  <span class="co"># Create a bar graph of author counts</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">author</span>, y <span class="op">=</span> <span class="va">count</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title    <span class="op">=</span> <span class="st">"Who writes the most RStudio blog posts?"</span>,
       subtitle <span class="op">=</span> <span class="st">"By a huge margin, Hadley!"</span><span class="op">)</span> <span class="op">+</span>
  <span class="co"># Shoutout to Bob Rudis for the always fantastic themes</span>
  <span class="fu">hrbrthemes</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/hrbrthemes/man/theme_ipsum.html">theme_ipsum</a></span><span class="op">(</span>grid <span class="op">=</span> <span class="st">"Y"</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="792"></p>
</div>
</div>
</section><section id="tidytext" class="level2"><h2 class="anchored" data-anchor-id="tidytext">Tidytext</h2>
<p>I’ve never used <code>tidytext</code> before today, but to get our feet wet, let’s create a tokenized tidy version of our data. By using <code><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens()</a></code> the data will be reshaped to a long format holding 1 word per row, for each blog post. This tidy format lends itself to all manner of analysis, and a number of them are outlined in Julia Silge and David Robinson’s <a href="http://tidytextmining.com/">Text Mining with R</a>.</p>
<div class="cell">
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">tokenized_blog</span> <span class="op">&lt;-</span> <span class="va">blog_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>short_title <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub</a></span><span class="op">(</span><span class="va">title</span>, end <span class="op">=</span> <span class="fl">15</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">title</span>, <span class="va">short_title</span>, <span class="va">author</span>, <span class="va">date</span>, <span class="va">text</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span>output <span class="op">=</span> <span class="va">word</span>, input <span class="op">=</span> <span class="va">text</span><span class="op">)</span>

<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">tokenized_blog</span>, <span class="va">short_title</span>, <span class="va">word</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 85,761 × 2</span>
<span class="co">#&gt;    short_title     word     </span>
<span class="co">#&gt;    &lt;chr&gt;           &lt;chr&gt;    </span>
<span class="co">#&gt;  1 Newer to R? rst immersion</span>
<span class="co">#&gt;  2 Newer to R? rst is       </span>
<span class="co">#&gt;  3 Newer to R? rst among    </span>
<span class="co">#&gt;  4 Newer to R? rst the      </span>
<span class="co">#&gt;  5 Newer to R? rst most     </span>
<span class="co">#&gt;  6 Newer to R? rst effective</span>
<span class="co">#&gt;  7 Newer to R? rst ways     </span>
<span class="co">#&gt;  8 Newer to R? rst to       </span>
<span class="co">#&gt;  9 Newer to R? rst learn    </span>
<span class="co">#&gt; 10 Newer to R? rst any      </span>
<span class="co">#&gt; # … with 85,751 more rows</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="remove-stop-words" class="level2"><h2 class="anchored" data-anchor-id="remove-stop-words">Remove stop words</h2>
<p>A number of words like “a” or “the” are included in the blog that don’t really add value to a text analysis. These stop words can be removed using an <code><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">anti_join()</a></code> with the <code>stop_words</code> dataset that comes with <code>tidytext</code>. After removing stop words, the number of rows was cut in half!</p>
<div class="cell">
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">tokenized_blog</span> <span class="op">&lt;-</span> <span class="va">tokenized_blog</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">anti_join</a></span><span class="op">(</span><span class="va">stop_words</span>, by <span class="op">=</span> <span class="st">"word"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">tokenized_blog</span>, <span class="va">short_title</span>, <span class="va">word</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 40,315 × 2</span>
<span class="co">#&gt;    short_title     word     </span>
<span class="co">#&gt;    &lt;chr&gt;           &lt;chr&gt;    </span>
<span class="co">#&gt;  1 Newer to R? rst immersion</span>
<span class="co">#&gt;  2 Newer to R? rst effective</span>
<span class="co">#&gt;  3 Newer to R? rst learn    </span>
<span class="co">#&gt;  4 Newer to R? rst language </span>
<span class="co">#&gt;  5 Newer to R? rst immersing</span>
<span class="co">#&gt;  6 Newer to R? rst advanced </span>
<span class="co">#&gt;  7 Newer to R? rst users    </span>
<span class="co">#&gt;  8 Newer to R? rst improve  </span>
<span class="co">#&gt;  9 Newer to R? rst language </span>
<span class="co">#&gt; 10 Newer to R? rst rare     </span>
<span class="co">#&gt; # … with 40,305 more rows</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="top-15-words-overall" class="level2"><h2 class="anchored" data-anchor-id="top-15-words-overall">Top 15 words overall</h2>
<p>Out of pure curiousity, what are the top 15 words for all of the blog posts?</p>
<div class="cell">
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">tokenized_blog</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">word</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">15</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>word <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Top 15 words overall"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">hrbrthemes</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/hrbrthemes/man/theme_ipsum.html">theme_ipsum</a></span><span class="op">(</span>grid <span class="op">=</span> <span class="st">"Y"</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="792"></p>
</div>
</div>
</section><section id="is-hadley-more-pleased-than-everyone-else" class="level2"><h2 class="anchored" data-anchor-id="is-hadley-more-pleased-than-everyone-else">Is Hadley more “pleased” than everyone else?</h2>
<p>As mentioned at the beginning of the post, Hadley apparently uses the word “pleased” in his blog posts an above average number of times. Can we verify this statistically?</p>
<p><em>Our null hypothesis is that the proportion of blog posts that use the word “pleased” written by Hadley is less than or equal to the proportion of those written by the rest of the RStudio team.</em></p>
<p>More simply, our null is that Hadley uses “pleased” less than or the same as the rest of the team.</p>
<p>Let’s check visually to compare the two groups of posts.</p>
<div class="cell">
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">pleased</span> <span class="op">&lt;-</span> <span class="va">tokenized_blog</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  
  <span class="co"># Group by blog post</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">title</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  
  <span class="co"># If the blog post contains "pleased" put yes, otherwise no</span>
  <span class="co"># Add a column checking if the author was Hadley</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
    contains_pleased <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span>
      <span class="st">"pleased"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="va">word</span> <span class="op">~</span> <span class="st">"Yes"</span>,
      <span class="cn">TRUE</span>                <span class="op">~</span> <span class="st">"No"</span><span class="op">)</span>,
    
    is_hadley <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span>
      <span class="va">author</span> <span class="op">==</span> <span class="st">"Hadley Wickham"</span> <span class="op">~</span> <span class="st">"Hadley"</span>,
      <span class="cn">TRUE</span>                       <span class="op">~</span> <span class="st">"Not Hadley"</span><span class="op">)</span>
    <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  
  <span class="co"># Remove all duplicates now</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="va">title</span>, <span class="va">contains_pleased</span>, <span class="va">is_hadley</span><span class="op">)</span>

<span class="va">pleased</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">contains_pleased</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">is_hadley</span>, scales <span class="op">=</span> <span class="st">"free_y"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title    <span class="op">=</span> <span class="st">"Does this blog post contain 'pleased'?"</span>, 
       subtitle <span class="op">=</span> <span class="st">"Nearly half of Hadley's do!"</span>,
       x        <span class="op">=</span> <span class="st">"Contains 'pleased'"</span>,
       y        <span class="op">=</span> <span class="st">"Count"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">hrbrthemes</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/hrbrthemes/man/theme_ipsum.html">theme_ipsum</a></span><span class="op">(</span>grid <span class="op">=</span> <span class="st">"Y"</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="792"></p>
</div>
</div>
</section><section id="is-there-a-statistical-difference-here" class="level2"><h2 class="anchored" data-anchor-id="is-there-a-statistical-difference-here">Is there a statistical difference here?</h2>
<p>To check if there is a statistical difference, we will use a test for difference in proportions contained in the R function, <code><a href="https://rdrr.io/r/stats/prop.test.html">prop.test()</a></code>. First, we need a continency table of the counts. Given the current form of our dataset, this isn’t too hard with the <code><a href="https://rdrr.io/r/base/table.html">table()</a></code> function from base R.</p>
<div class="cell">
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">contingency_table</span> <span class="op">&lt;-</span> <span class="va">pleased</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">is_hadley</span>, <span class="va">contains_pleased</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="co"># Order the factor so Yes is before No for easy interpretation</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>contains_pleased <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">contains_pleased</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Yes"</span>, <span class="st">"No"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">contingency_table</span>
<span class="co">#&gt;             contains_pleased</span>
<span class="co">#&gt; is_hadley    Yes  No</span>
<span class="co">#&gt;   Hadley      43  45</span>
<span class="co">#&gt;   Not Hadley  17 148</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>From our null hypothesis, we want to perform a <em>one sided</em> test. The alternative to our null is that Hadley uses “pleased” <em>more</em> than the rest of the RStudio team. For this reason, we specify <code>alternative = "greater"</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="va">test_prop</span> <span class="op">&lt;-</span> <span class="va">contingency_table</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/stats/prop.test.html">prop.test</a></span><span class="op">(</span>alternative <span class="op">=</span> <span class="st">"greater"</span><span class="op">)</span>

<span class="va">test_prop</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  2-sample test for equality of proportions with continuity correction</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; data:  .</span>
<span class="co">#&gt; X-squared = 45.063, df = 1, p-value = 9.541e-12</span>
<span class="co">#&gt; alternative hypothesis: greater</span>
<span class="co">#&gt; 95 percent confidence interval:</span>
<span class="co">#&gt;  0.2809899 1.0000000</span>
<span class="co">#&gt; sample estimates:</span>
<span class="co">#&gt;    prop 1    prop 2 </span>
<span class="co">#&gt; 0.4886364 0.1030303</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We could also tidy this up with <code>broom</code> if we were inclined to.</p>
<div class="cell">
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span class="fu">broom</span><span class="fu">::</span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="va">test_prop</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1 × 9</span>
<span class="co">#&gt;   estimate1 estimate2 statistic  p.value parameter conf.low conf.high method    </span>
<span class="co">#&gt;       &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;     </span>
<span class="co">#&gt; 1     0.489     0.103      45.1 9.54e-12         1    0.281         1 2-sample …</span>
<span class="co">#&gt; # … with 1 more variable: alternative &lt;chr&gt;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="test-conclusion" class="level2"><h2 class="anchored" data-anchor-id="test-conclusion">Test conclusion</h2>
<ul>
<li>48.86% of Hadley’s posts contain “pleased”</li>
<li>10.3% of the rest of the RStudio team’s posts contain “pleased”</li>
<li>With a p-value of 9.5414477^{-12}, we reject the null that Hadley uses “pleased” less than or the same as the rest of the team. The evidence supports the idea that he has a much higher preference for it!</li>
</ul>
<p>Hadley uses “pleased” quite a bit!</p>
</section><section id="conclusion" class="level2"><h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>This post used a lot of different tools, but that’s the beauty of having over 12,000 R packages at our disposal. I think that this dataset could be used in a number of other ways, so be on the lookout for more posts!</p>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>